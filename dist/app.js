function randomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Bar(e){this.element=e,this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.levels=[.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5],this.angles=[];for(var t=0;t<this.levels.length;t++)this.angles.push(randomInt(0,2)-1);this.level=.5,this.height=this.canvas.height,this.width=this.canvas.width,this._angle=0}function App(){this.version="v0.0.1",this.author="Marco Stagni",this.coffee=new Bar("coffee"),this.sleep=new Bar("sleep"),this.canvas=document.querySelector("#game"),this.container=document.querySelector("#gameContainer"),this.canvas.height=1400,this.canvas.width=1400,this.container.style.height=this.canvas.height+"px;",this.container.style.width=this.canvas.width+"px;",this.maze=this.createMaze(this.canvas.height/50,this.canvas.height/50),this.drawMaze(this.maze)}function render(){app.render(),app.renderid=requestAnimationFrame(render)}Bar.prototype={render:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var e,t=5,i=15,h=0;h<this.levels.length;h++)e=this.levels[h]*this.height+5*Math.sin(this.angles[h]),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(i,this.height-e,t,e),i+=t+8,this.angles[h]+=.1;this.levels.shift(),this.levels.push(app[this.element].level),this._angle+=.1},inc:function(e){this.level+=e?e:.1},dec:function(e){this.level=this.level-(e?e:.1)}},App.prototype={printVersion:function(){var e=document.getElementById("version");e.innerText=this.version},createMaze:function(e,t){var i=e*t-1;if(i<0)return void alert("illegal maze dimensions");for(var h=[],n=0;n<e+1;n++)h[n]=[],verti=[];for(var n=0;n<e+1;n++)verti[n]=[],here=[Math.floor(Math.random()*e),Math.floor(Math.random()*t)],path=[here],unvisited=[];for(var n=0;n<e+2;n++){unvisited[n]=[];for(var r=0;r<t+1;r++)unvisited[n].push(n>0&&n<e+1&&r>0&&(n!=here[0]+1||r!=here[1]+1))}for(;0<i;){for(var s=[[here[0]+1,here[1]],[here[0],here[1]+1],[here[0]-1,here[1]],[here[0],here[1]-1]],a=[],n=0;n<4;n++)unvisited[s[n][0]+1][s[n][1]+1]&&a.push(s[n]);a.length?(i-=1,next=a[Math.floor(Math.random()*a.length)],unvisited[next[0]+1][next[1]+1]=!1,next[0]==here[0]?h[next[0]][(next[1]+here[1]-1)/2]=!0:verti[(next[0]+here[0]-1)/2][next[1]]=!0,path.push(here=next)):here=path.pop()}return{x:e,y:t,horiz:h,verti:verti}},drawMaze:function(e){for(var t=[],i=0;i<2*e.x+1;i++){var h=[];if(0==i%2)for(var n=0;n<4*e.y+1;n++)0==n%4?h[n]="+":i>0&&e.verti[i/2-1][Math.floor(n/4)]?h[n]=" ":h[n]="-";else for(var n=0;n<4*e.y+1;n++)0==n%4?n>0&&e.horiz[(i-1)/2][n/4-1]?h[n]=" ":h[n]="|":h[n]=" ";0==i&&(h[1]=h[2]=h[3]=" "),2*e.x-1==i&&(h[4*e.y]=" "),t.push(h.join("")+"\r\n")}return t.join("")},render:function(){this.coffee.render(),this.sleep.render()}};var app;window.onload=function(){app=new App,app.printVersion(),render()};