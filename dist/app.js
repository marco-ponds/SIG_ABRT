function randomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Bar(e){this.element=e,this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.levels=[.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5],this.angles=[];for(var t=0;t<this.levels.length;t++)this.angles.push(randomInt(0,2)-1);this.level=.5,this.height=this.canvas.height,this.width=this.canvas.width,this._angle=0}function App(){this.version="v0.0.1",this.author="Marco Stagni",this.coffee=new Bar("coffee"),this.sleep=new Bar("sleep"),this.canvas=document.querySelector("#game"),this.container=document.querySelector("#gameContainer"),this.c=this.canvas.getContext("2d"),this.canvas.height=2500,this.canvas.width=4900,this.step=100,this.margin=200,this.container.style.height=this.canvas.height+"px;",this.container.style.width=this.canvas.width+"px;",this.maze=this.createMaze(12,12),this.drawMaze(this.maze)}function render(){app.render(),app.renderid=requestAnimationFrame(render)}Bar.prototype={render:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var e,t=5,i=15,h=0;h<this.levels.length;h++)e=this.levels[h]*this.height+5*Math.sin(this.angles[h]),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(i,this.height-e,t,e),i+=t+8,this.angles[h]+=.1;this.levels.shift(),this.levels.push(app[this.element].level),this._angle+=.1},inc:function(e){this.level+=e?e:.1},dec:function(e){this.level=this.level-(e?e:.1)}},App.prototype={printVersion:function(){var e=document.getElementById("version");e.innerText=this.version},createMaze:function(e,t){var i=e*t-1;if(i<0)return void alert("illegal maze dimensions");for(var h=[],s=0;s<e+1;s++)h[s]=[],verti=[];for(var s=0;s<e+1;s++)verti[s]=[],here=[Math.floor(Math.random()*e),Math.floor(Math.random()*t)],path=[here],unvisited=[];for(var s=0;s<e+2;s++){unvisited[s]=[];for(var n=0;n<t+1;n++)unvisited[s].push(s>0&&s<e+1&&n>0&&(s!=here[0]+1||n!=here[1]+1))}for(;0<i;){for(var r=[[here[0]+1,here[1]],[here[0],here[1]+1],[here[0]-1,here[1]],[here[0],here[1]-1]],a=[],s=0;s<4;s++)unvisited[r[s][0]+1][r[s][1]+1]&&a.push(r[s]);a.length?(i-=1,next=a[Math.floor(Math.random()*a.length)],unvisited[next[0]+1][next[1]+1]=!1,next[0]==here[0]?h[next[0]][(next[1]+here[1]-1)/2]=!0:verti[(next[0]+here[0]-1)/2][next[1]]=!0,path.push(here=next)):here=path.pop()}return{x:e,y:t,horiz:h,verti:verti}},drawMaze:function(e){var t=[],i={x:0,y:0};this.c.fillStyle="rgb(255, 255, 0)";for(var h=0;h<2*e.x+1;h++){var s=[];if(0==h%2)for(var n=0;n<4*e.y+1;n++)0==n%4?(s[n]="+",this.c.fillRect(i.x,i.y,20,20),i.x+=this.step,this.c.moveTo(i.x,i.y)):h>0&&e.verti[h/2-1][Math.floor(n/4)]?(s[n]=" ",i.x+=this.step,this.c.moveTo(i.x,i.y)):(s[n]="-",this.c.fillRect(i.x-90,i.y,190,20),i.x+=this.step,this.c.moveTo(i.x,i.y));else for(var n=0;n<4*e.y+1;n++)0==n%4?n>0&&e.horiz[(h-1)/2][n/4-1]?(s[n]=" ",i.x+=this.step,this.c.moveTo(i.x,i.y)):(s[n]="|",this.c.fillRect(i.x,i.y-90,20,190),i.x+=this.step,this.c.moveTo(i.x,i.y)):(s[n]=" ",i.x+=this.step,this.c.moveTo(i.x,i.y));0==h&&(s[1]=s[2]=s[3]=" ",i.x+=this.step,this.c.moveTo(i.x,i.y)),2*e.x-1==h&&(s[4*e.y]=" ",i.x+=this.step,this.c.moveTo(i.x,i.y)),t.push(s.join("")+"\r\n"),i.x=0,i.y+=this.step}console.log(t.join(""))},render:function(){this.coffee.render(),this.sleep.render()}};var app;window.onload=function(){app=new App,app.printVersion(),render()};